from PIL import Image

# เปิดภาพ
image_path = "colors.jpg"  # เปลี่ยนเป็นพาธของคุณ
image = Image.open(image_path).convert("RGB")  # ใช้ RGB เท่านั้น

# ดึง Histogram ของภาพ
histogram = image.histogram()

# แยกแยะค่า BGR (โดยที่ histogram[0::3] คือสี Blue, histogram[1::3] คือ Green, histogram[2::3] คือ Red)
colors = list(zip(histogram[2::3], histogram[1::3], histogram[0::3]))  # เปลี่ยนการจัดลำดับเป็น BGR

# กรองเฉพาะสีที่มีจำนวนพิกเซลมาก
unique_colors = [color for color in colors if color != (0, 0, 0)]  # กรองสีที่ไม่มีพิกเซล

print(unique_colors)

[(202, 392, 1027), (42, 98, 178), (100, 125, 83), (21, 17, 14), (52, 53, 63), (5, 4, 54), (1, 2, 2), (2, 0, 0), (3, 1, 1), (2, 2, 1), (1, 1, 0), (0, 0, 1), (0, 7, 16), (24, 7, 0), 
(10, 4, 23), (8, 37, 20), (8, 21, 3), (85, 22, 44), (46, 64, 47), (93, 9, 111), (113, 27, 119), (115, 7, 99), (95, 47, 81), (157, 118, 27), (36, 148, 82), (50, 88, 107), (32, 80, 22), (38, 66, 23), (130, 76, 90), (96, 75, 79), (63, 68, 72), (82, 80, 96), (74, 35, 26), (144, 30, 73), (344, 777, 415), (60, 76, 93), (47, 80, 54), (25, 62, 59), (9, 10, 6), (0, 3, 3), (0, 0, 1), (0, 1, 0), (4, 2, 4), (1, 2, 1), (1, 0, 0), (3, 3, 0), (13, 5, 2), (93, 50, 18), (29, 36, 48), (4, 21, 14), (0, 1, 5), (3, 7, 2), (0, 1, 2), (3, 6, 2), (0, 2, 2), 
(8, 3, 1), (24, 24, 7), (95, 114, 55), (1, 3, 10), (25, 2, 0), (116, 95, 50), (8, 18, 65), (31, 12, 13), (79, 22, 19), (35, 46, 58), (3, 3, 6), (0, 1, 0), (4, 2, 21), (29, 11, 3), 
(26, 7, 38), (36, 61, 81), (15, 42, 41), (45, 10, 15), (80, 77, 52), (183, 173, 169), (36, 128, 182), (100, 50, 7), (12, 21, 86), (69, 21, 24), (35, 99, 137), (24, 6, 7), (45, 30, 
19), (51, 175, 112), (60, 82, 54), (19, 17, 47), (17, 2, 9), (24, 9, 7), (9, 26, 5), (58, 111, 51), (88, 86, 92), (5, 33, 57), (1, 2, 5), (1869, 15, 0), (384, 282, 642), (164, 147, 267), (112, 186, 99), (47, 143, 99), (36, 87, 75), (61, 83, 57), (41, 48, 38), (19, 3, 34), (30, 17, 4), (3, 8, 20), (4, 2, 11), (0, 2, 1), (0, 3, 0), (2, 1, 2), (1, 2, 3), (1, 1, 1), (0, 1, 1), (9, 0, 7), (5, 6, 0), (1, 1, 1), (7, 1, 6), (39, 1, 10), (2, 42, 9), (39, 3, 72), (37, 0, 26), (1, 23, 1), (3, 16, 5), (218, 190, 126), (16, 26, 121), (93, 17, 13), (86, 16, 134), (0, 7, 5), (1, 0, 0), (0, 2, 0), (2, 5, 3), (0, 1, 1), (0, 0, 1), (2, 0, 1), (1, 0, 0), (0, 5, 0), (0, 2, 3), (0, 0, 1), (1, 1, 0), (0, 3, 0), (6, 0, 9), (9, 0, 6), (0, 22, 0), (6, 0, 15), (35, 0, 21), (51, 39, 0)]
#  # รายชื่อสีที่ต้องเก็บไว้
# allowed_colors = {
# (1964, 48, 2, 6), (4, 0, 0, 0), (0, 0, 0, 11), (0, 0, 0, 48), (82, 28, 25, 1), (0, 0, 1, 0), (0, 0, 0, 25), (1, 1, 50, 273), (27, 37, 2, 21), (243, 2, 51, 38), (309, 30, 36, 7), (46, 25, 0, 13), (297, 293, 9, 12), (22, 261, 4, 0), (0, 1, 21, 0), (20, 2, 2, 281), (268, 10, 0, 0), (10, 1, 11, 260), (4, 1, 5, 5), (16, 13, 295, 1667), (1355, 46, 17, 1), 
# (0, 0, 1, 10), (0, 0, 1, 10), (0, 0, 10, 1), (17, 258, 0, 0), (0, 11, 0, 0), (1, 24, 1, 80), (23, 0, 0, 0), (2, 0, 0, 21), (1, 0, 0, 10), (254, 0, 0, 0), (0, 1, 0, 0), (0, 40, 260, 0), (1, 0, 0, 0), (0, 11, 0, 273), (2, 0, 12, 0), (0, 25, 0, 0), (0, 2, 281, 3), (8, 3, 0, 0), (26, 0, 0, 24), (1, 1, 0, 4), (12, 6, 0, 0), (37, 266, 0, 0), (0, 1, 25, 34), (27, 0, 13, 1), (521, 70, 25, 622), (2, 12, 33, 3), (264, 1, 1, 12), (25, 0, 13, 289), (37, 3, 22, 11), (0, 0, 0, 11), (259, 269, 21, 1), (7, 268, 11, 11), (0, 14, 8, 0), (0, 0, 0, 20), (255, 0, 1, 269), (5, 0, 0, 0), (22, 0, 2, 273), (3360, 587, 29, 13), (20, 14, 3, 0), (4, 7, 0, 0), (0, 0, 7, 3), (1, 0, 0, 0), (0, 0, 0, 2), (8, 1, 0, 0), (0, 0, 0, 2), (9, 0, 0, 1), (9, 1, 0, 0), (0, 12, 250, 2), (0, 0, 5, 268), (282, 6, 0, 0), (1, 2, 7, 271), (4, 1, 0, 0), (2, 0, 25, 26), (49, 6, 50, 51), (27, 80, 26, 21), (3, 0, 1, 0), (0, 1, 0, 0), 
# (0, 0, 11, 1), (0, 2, 0, 0), (0, 0, 21, 3), (49, 2, 0, 26), (1, 0, 0, 0), (0, 0, 0, 3), (29, 26, 21, 3), (22, 1, 0, 1), (24, 0, 0, 0), (0, 0, 1, 0), (0, 10, 1, 0), (0, 8, 2, 1), (22, 14, 547, 836), (0, 0, 0, 7248) }


# # ใช้สีที่อนุญาตโดยตรง (RGB)
# allowed_colors_rgb = {(r, g, b) for r, g, b, a in allowed_colors}

# # ดึงพิกเซลของภาพ
# pixels = image.load()
# width, height = image.size

# # แก้ไขภาพ
# for x in range(width):
#     for y in range(height):
#         r, g, b, a = pixels[x, y]
#         if (r, g, b) not in allowed_colors_rgb:
#             pixels[x, y] = (0, 0, 0, 0)  # โปร่งใส หรือใช้ (0, 0, 0, 255) แทนเป็นสีดำ

# # บันทึกภาพผลลัพธ์
# output_path = "11.png"  # เปลี่ยนเป็นพาธที่ต้องการ
# image.save(output_path)

# from PIL import Image

# # เปิดภาพ
# image_path = "colors.png"  # เปลี่ยนเป็นพาธของคุณ
# image = Image.open(image_path).convert("BGR")  # ใช้ RGBA เพื่อให้รองรับความโปร่งใส

# # รายชื่อสีที่ต้องเก็บไว้ (เป็น RGBA)
# allowed_colors = {
#     (196, 48, 2, 6), (4, 0, 0, 0), (0, 0, 0, 11), (0, 0, 0, 48),
#     (82, 28, 25, 1), (0, 0, 1, 0), (0, 0, 0, 25), (1, 1, 50, 273),
#     (27, 37, 2, 21), (243, 2, 51, 38), (309, 30, 36, 7), (46, 25, 0, 13),
#     (297, 293, 9, 12), (22, 261, 4, 0), (0, 1, 21, 0), (20, 2, 2, 281),
#     (268, 10, 0, 0), (10, 1, 11, 260), (4, 1, 5, 5), (16, 13, 295, 1667),
#     (135, 46, 17, 1), (0, 0, 1, 10), (0, 0, 1, 10), (0, 0, 10, 1),
#     (17, 258, 0, 0), (0, 11, 0, 0), (1, 24, 1, 80), (23, 0, 0, 0),
#     (2, 0, 0, 21), (1, 0, 0, 10), (254, 0, 0, 0), (0, 1, 0, 0)
# }

# # แปลงสีที่อนุญาตให้เป็น RGB tuples (ตัดค่าความโปร่งใสออก)
# allowed_colors_rgb = {(r, g, b) for r, g, b, a in allowed_colors}

# # ดึงพิกเซลของภาพ
# pixels = image.load()
# width, height = image.size

# # แก้ไขภาพ
# for x in range(width):
#     for y in range(height):
#         r, g, b, a = pixels[x, y]
#         if (r, g, b) not in allowed_colors_rgb:
#             pixels[x, y] = (0, 0, 0, 0)  # ทำให้พิกเซลโปร่งใส

# # บันทึกภาพผลลัพธ์
# output_path = "12.png"  # เปลี่ยนเป็นพาธที่ต้องการ
# image.save(output_path)
